<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Diabetes Classification</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap-4.1.3-dist/css/bootstrap.min.css')}}">
    <style>.github-corner:hover .octo-arm {
        animation: octocat-wave 560ms ease-in-out
    }

    @keyframes octocat-wave {
        0%, 100% {
            transform: rotate(0)
        }
        20%, 60% {
            transform: rotate(-25deg)
        }
        40%, 80% {
            transform: rotate(10deg)
        }
    }

    @media (max-width: 500px) {
        .github-corner:hover .octo-arm {
            animation: none
        }

        .github-corner .octo-arm {
            animation: octocat-wave 560ms ease-in-out
        }
    }</style>
</head>

<body>
<div class="container-fluid pt-5">
    <div class="row">
        <div class="col-12 text-center">
            <h1>Diabetes Classification</h1>
        </div>
    </div>
    <div class="row pt-4">
        <div class="col-6 pl-5">
            <form action="{{ url_for('predict')}}" method="post" id="form-predict">
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputPregnancies">Pregnancies</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputPregnancies"
                               name="Pregnancies"
                               placeholder="Pregnancies" step=1 required autofocus/>
                    </div>
                </div>
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputGlucose">Glucose</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputGlucose" name="Glucose"
                               placeholder="Glucose" step=1 required/>
                    </div>
                </div>
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputBloodPressure">Blood Pressure</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputBloodPressure"
                               name="BloodPressure"
                               placeholder="Blood pressure" step=1 required/>
                    </div>
                </div>
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputSkinThickness">Skin Thickness</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputSkinThickness"
                               name="SkinThickness"
                               placeholder="Skin Thickness" step=1 required/>
                    </div>
                </div>
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputInsulin">Insulin</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputInsulin" name="Insulin"
                               placeholder="Insulin" step=1 required/>
                    </div>
                </div>
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputBMI">BMI</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputBMI" name="BMI"
                               placeholder="BMI" step=0.01 required/>
                    </div>
                </div>
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputDiabetesPedigreeFunction">Diabetes Pedigree Function</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputDiabetesPedigreeFunction"
                               name="DiabetesPedigreeFunction"
                               placeholder="Diabetes Pedigree Function" step=0.001 required/>
                    </div>
                </div>
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputAge">Age</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputAge" name="Age"
                               placeholder="Age" step=1 required/>
                    </div>
                </div>
                <button type="submit" class="btn btn-outline-danger btn-block">Predict</button>
                </br>
            </form>
        </div>
        <div class="col-6 pr-5">
            <p>
                Diabetes is a disease in which your blood glucose, or blood sugar, levels are too high. Glucose comes
                from the foods you eat. Insulin is a hormone that helps the glucose get into your cells to give them
                energy. With type 1 diabetes, your body does not make insulin. With type 2 diabetes, the more common
                type, your body does not make or use insulin well. Without enough insulin, the glucose stays in your
                blood. You can also have prediabetes. This means that your blood sugar is higher than normal but not
                high enough to be called diabetes. Having prediabetes puts you at a higher risk of getting type 2
                diabetes.
            </p>
            <p>
                This tool is expected to classify whether someone has diabetes or not using some of the features below using Gaussian Naive Bayes Model on Scikit-Learn with <b>76.43% <a href="https://en.wikipedia.org/wiki/Precision_and_recall#Definition_(classification_context)" target="_blank">Accuracy</a></b>, <b>68.04% <a href="https://en.wikipedia.org/wiki/Precision_and_recall#Definition_(classification_context)" target="_blank">Precision</a></b> and <b>61.19% <a href="https://en.wikipedia.org/wiki/Precision_and_recall#Definition_(classification_context)" target="_blank">Recall</a>.</b> 
            </p>

            <h5>Features</h5>
            <ul>
                <li><b>Pregnancies</b> Number of times pregnant</li>
                <li><b>Glucose</b> Plasma glucose concentration a 2 hours in an oral glucose tolerance test</li>
                <li><b>Blood Pressure</b> Diastolic blood pressure (mm Hg)</li>
                <li><b>Skin Thickness</b> Triceps skin fold thickness (mm)</li>
                <li><b>Insulin</b> 2-Hour serum insulin (mu U/ml)</li>
                <li><b>BMI</b> Body mass index (weight in kg/(height in m)^2)</li>
                <li><b>Diabetes Pedigree Function</b> Diabetes pedigree function</li>
                <li><b>Age</b> Age (years)</li>
            </ul>

            <h5>Authors</h5>
            <a href="https://www.linkedin.com/in/adityarahman032" target="_blank">Aditya Rahman</a> |
            <a href="https://github.com/MonBet" target="_blank">Galih Hadi Wibowo</a>
        </div>
    </div>
</div>
{{ prediction_text }}

<a href="https://github.com/kudaliar032/diabetes-classification-svm" target="_blank" class="github-corner"
   aria-label="View source on GitHub">
    <svg width="80" height="80" viewBox="0 0 250 250"
         style="fill:#FD6C6C; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>

<script src="{{ url_for('static', filename='js/jquery-3.4.1.min.js')}}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='bootstrap-4.1.3-dist/js/bootstrap.min.js')}}"></script>
<script src="{{ url_for('static', filename='sweetalert2-9.4.3/package/dist/sweetalert2.all.min.js')}}"></script>

<script>
    const formPredict = $('#form-predict');

    formPredict.submit((e) => {
        e.preventDefault();
        $.post("{{ url_for('predict')}}", formPredict.serialize(), res => {
            Swal.fire({
                icon: res.prediction_text === "1" ? "error" : "success",
                title: res.prediction_text === "1" ? "Oops..." : "Yass...",
                text: res.prediction_text === "1" ? "You probably have diabetes, Please contact a doctor" : "You're healthy!!",
            }).then(res => {
                if (res.value) {
                    formPredict.trigger("reset");
                }
            });
        });
    });
</script>
</body>
</html>